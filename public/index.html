<!doctype html>
<html>
  <head>
    <META HTTP-EQUIV="Access-Control-Allow-Origin" value="*">
    <!--<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script type="text/javascript" src="javascripts/clientSocket.js"></script>-->
    <link rel="stylesheet" href="css/basic.css" type="text/css">
    <link type="text/css" rel="stylesheet" href="css/materialize.css"  media="screen,projection"/>
    <link href='http://fonts.googleapis.com/css?family=Merriweather' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>

    <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    <script type="text/javascript" src="javascripts/clientSocket.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script type="text/javascript" src="javascripts/materialize.min.js"></script>
    <script src="http://connect.soundcloud.com/sdk.js"></script>
    <script type="text/javascript" src="javascripts/api.js"></script>
    <!-- // <script src="http://www.youtube.com/player_api"></script> -->
    <title>BeatQ</title>


  </head>
  <body>

  
<div id="first-page">
  <div class="row">
      <div class="col s12 m12">
        <br><br>
        <h1 class="center">Welcome to BeatQ!</h1>
      </div>
  </div>
  <div class="row">
      <div class="col s12 m12">
        <br>
        <center>
          <button class="btn waves-effect waves-light" type="submit" name="action" id="new-room">New Room</button>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <button class="btn waves-effect waves-light" type="submit" name="action">Join Room</button>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          <button class="btn waves-effect waves-light" type="submit" name="action">About</button>
        </center>
      </div>
  </div>
</div>




  <div id="nickWrap" class="z-depth-1">
    <p id="nickError"></p>
    <form id="setNickname">
      <input size="35" id="nickname" placeholder="Enter name..."></input>
      <center><button class="btn waves-effect waves-light" type="submit" name="action">Submit</button></center>
    </form>
  </div>

  <div class="main-container">
    <div class="row">
      <!-- <div id="media"> -->
          <div id="player" class="col s12 m8"></div>
     <script src="http://www.youtube.com/player_api"></script>
     <script>
      // create youtube player
      
        var player;
        function onYouTubePlayerAPIReady() {
            player = new YT.Player('player', {
              height: '390',
              width: '380',
              videoId: 'JOlCUtxQW0Y',
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
              }
            });
        }

        // autoplay video
        function onPlayerReady(event) {
            $('#show-queue').html(event.target.A.videoData.title);
            $('#queue-count').html("(Songs in the Q: " + theQ.length + ")");
            if (theQ.length != 0){
              event.target.playVideo();
            }
        }

        // when video ends
        function onPlayerStateChange(event) {   
              
            if(event.data === 0) {
                if (theQ.length <= 1) {
                  alert('There are no more songs in the Q! The last song will loop until another video is added.');
                }
                player.loadVideoById(theQ[0]);
                if (theQ.length > 1){

                  theQ.shift(); // this way, if there are no more videos in the Q, the last video will replay (so as to not throw errors)
                  
                }
                $('#show-queue').append(event.target.A.videoData.title);
                

            };
            $('#queue-count').html("(Songs in the Q: " + theQ.length + ")");
            $('#show-queue').html(event.target.A.videoData.title);

        }
      
    
     </script>
      <!-- </div> -->
<!-- <div id="chat-wrap"> -->
      <div class="col s12 m4" id="chat-content">
        <div class="z-depth-1" id="chat-box">
              <div class="box-label">Chat <div id="queue-count" align="right"></div></div>
       <!--  <div class="z-depth-1" id="details-box"> -->
                <ul id="messages"></ul>
                <form action="#">
                  <input id="m" autocomplete="off" placeholder="Type your message here..."/>
                  <!-- <a href="" class="" id="chat-send">Send</a> -->
                </form>
        </div>
        <!-- </div> -->
      <!-- </div> -->
      </div>
        
        <div class="row" id="details-row">
           <div class="col s12 m8">
            <div class="z-depth-1" id="details-box">
              <div class="box-label-details">Details</div><br>
                <div id="show-queue">
                  
                </div>
                
            </div>
          </div>
        </div>


    </div>
  <!-- </div> -->



</div>

    
 

  </body>
</html>


















